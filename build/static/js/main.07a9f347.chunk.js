(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{22:function(e,t,a){e.exports=a(33)},27:function(e,t,a){},33:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(12),c=a.n(r),l=(a(27),a(6)),o=a(14),m=a(9),i=a(2),u=a(8);var g=function(){var e=Object(n.useState)(""),t=Object(u.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(""),l=Object(u.a)(c,2),o=l[0],m=l[1],g=Object(n.useState)(!1),d=Object(u.a)(g,2),h=d[0],v=d[1];function E(e){var t=document.getElementById("login"),a=document.getElementById("password"),n=document.getElementById("massage");"login"===e.target.id?r(e.target.value):m(e.target.value),t.classList="",a.classList="",n.innerText="",n.classList=""}return s.a.createElement("div",{className:"login"},s.a.createElement("div",{className:"form"},s.a.createElement("form",null,s.a.createElement("p",null,"\u041b\u043e\u0433\u0438\u043d"),s.a.createElement("input",{id:"login",type:"text",value:a,onChange:E}),s.a.createElement("p",null,"\u041f\u043e\u0440\u043e\u043b\u044c"),s.a.createElement("input",{id:"password",type:"text",value:o,onChange:E}),s.a.createElement("br",null),h?s.a.createElement(i.a,{from:"/auth/login",to:"/chat"}):s.a.createElement("p",{id:"massage"}),s.a.createElement("br",null),s.a.createElement("button",{className:"btn btn-success",onClick:function(e){e.preventDefault();var t={login:a,password:o};fetch("http://localhost:9000/login",{method:"POST",body:JSON.stringify(t),headers:{"Content-type":"Application/json"}}).then((function(e){return e.json()})).then((function(e){console.log(e);var t=document.getElementById("login"),a=document.getElementById("password"),n=document.getElementById("massage");n.innerText=e.result,e.auth?v(!0):(t.classList="wrong",a.classList="wrong",n.classList="wrong",n.style.border="none")}))}},"\u0412\u043e\u0439\u0442\u0438"))))};var d=function(){var e=Object(n.useState)(""),t=Object(u.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(""),l=Object(u.a)(c,2),o=l[0],m=l[1];return s.a.createElement("div",{className:"login"},s.a.createElement("div",{className:"form"},s.a.createElement("form",null,s.a.createElement("p",null,"\u041b\u043e\u0433\u0438\u043d"),s.a.createElement("input",{id:"login",type:"text",value:a,onChange:function(e){var t=document.getElementById("login"),a=document.getElementById("massage");t.classList="",a.classList="",a.innerText="",r(e.target.value)}}),s.a.createElement("p",null,"\u041f\u043e\u0440\u043e\u043b\u044c"),s.a.createElement("input",{type:"text",value:o,onChange:function(e){return m(e.target.value)}}),s.a.createElement("br",null),s.a.createElement("p",{id:"massage"}),s.a.createElement("br",null),s.a.createElement("button",{className:"btn btn-success",onClick:function(e){e.preventDefault();var t={login:a,password:o};fetch("http://localhost:9000/register",{method:"POST",body:JSON.stringify(t),headers:{"Content-type":"Application/json"}}).then((function(e){return e.json()})).then((function(e){console.log(e);var t=document.getElementById("login"),a=document.getElementById("massage");a.innerText=e.massage,e.result||(t.classList="wrong",a.classList="wrong",a.style.border="none")}))}},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"))))};var h=function(){return s.a.createElement("div",{className:"Auth"},s.a.createElement("ul",{className:"nav"},s.a.createElement("li",null,s.a.createElement(m.b,{className:"nav-item",to:"/auth/login"},"\u041b\u043e\u0433\u0438\u043d")),s.a.createElement("li",null,s.a.createElement(m.b,{className:"nav-item",to:"/register"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"))),s.a.createElement(i.d,null,s.a.createElement(i.b,{path:"/auth/login",component:g}),s.a.createElement(i.b,{path:"/auth/register",component:d})))};var v=function(){return s.a.createElement("div",{className:"header"},"Massanger")},E=function(e){return{type:"ALL_MASSAGE",content:e}};var f=Object(l.b)((function(e){return{user:e.carrentUser}}))((function(e){var t=e.massage,a=e.user,n=t.users.filter((function(e){return e!==a}));return s.a.createElement("div",{className:"chatItem"},s.a.createElement("div",{className:"avatar"},n[0].slice(0,2)),s.a.createElement(m.b,{to:"/chat/"+t._id},s.a.createElement("p",{className:"chatItem-massage"},t.massages.length?t.massages[t.massages.length-1].massage:"\u041f\u043e\u043a\u0430 \u043d\u0435\u0442\u0443 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439...")))}));var p={saveMassages:E},b=Object(l.b)((function(e){return{masssages:e}}),p)((function(e){var t=e.masssages,a=e.saveMassages,r=Object(n.useState)(""),c=Object(u.a)(r,2),l=c[0],o=c[1];return s.a.createElement("div",{className:"chatsBar"},s.a.createElement("div",{className:"newChat"},s.a.createElement("input",{id:"search",className:"searchUser",type:"text",value:l,onChange:function(e){var t=document.querySelector("#search"),a=document.getElementById("massage");t.classList="",a.classList="",a.innerText="",o(e.target.value)}}),s.a.createElement("button",{onClick:function(){var e={login:l};fetch("http://localhost:9000/newChat",{method:"POST",credentials:"include",body:JSON.stringify(e),headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){if(console.log(e),e.result)a(e);else{document.querySelector("#search").classList="wrong";var t=document.getElementById("massage");t.classList="wrong",t.style.border="none",t.innerText=e.massage}}))},className:"newChat-button"},"+"),s.a.createElement("p",{id:"massage"})),s.a.createElement("div",{className:"chat-item-content"},t.obj.map((function(e,t){return s.a.createElement(f,{key:t,massage:e})}))))}));var y=Object(l.b)((function(e){return{carrentUser:e.carrentUser}}))((function(e){var t=e.massage,a=e.carrentUser;console.log(t),console.log(a);var n="massage-item "+(a===t.user?"right":"left");return a===t.user?s.a.createElement("div",{className:n},s.a.createElement("p",{className:"massage-item-content"},t.massage),s.a.createElement("div",{className:"avatar"},t.user.slice(0,2))):s.a.createElement("div",{className:n},s.a.createElement("div",{className:"avatar"},t.user.slice(0,2)),s.a.createElement("p",{className:"massage-item-left"},t.massage))}));var N={saveMassages:E},j=Object(l.b)((function(e){var t=window.location.href.slice(27,window.location.href.length);return{massageArr:e.obj.filter((function(e){return e._id===t}))[0]}}),N)((function(e){var t=e.massageArr,a=e.saveMassages,n=s.a.useState(""),r=Object(u.a)(n,2),c=r[0],l=r[1];return s.a.createElement("div",null,s.a.createElement("div",{className:"massage-content"},t?t.massages.map((function(e,t){return s.a.createElement(y,{massage:e,key:t})})):"\u041f\u043e\u043a\u0430 \u043d\u0435\u0442\u0443 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439..."),s.a.createElement("div",{className:"massage"},s.a.createElement("div",{className:"massage-input"},s.a.createElement("input",{type:"text",value:c,onChange:function(e){l(e.target.value)}}),s.a.createElement("button",{onClick:function(){if(l(""),!t){var e={_id:t._id,massage:c};fetch("http://localhost:9000/newMassage",{method:"POST",credentials:"include",body:JSON.stringify(e),headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){a(e)}))}},type:"button",className:"btn btn-success button"},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"))))}));var w={saveMassages:E},O=Object(l.b)(null,w)((function(e){var t=e.saveMassages;function a(){fetch("http://localhost:9000/getAllMassage",{method:"GET",credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.result||t(e)}))}return Object(n.useEffect)(a),setInterval(a,1e4),s.a.createElement("div",{className:"chat"},s.a.createElement(v,null),s.a.createElement(b,null),s.a.createElement(j,null))})),S={obj:[],carrentUser:""};var L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ALL_MASSAGE":return t.content;default:return e}},C=Object(o.b)(L);var I=function(){return s.a.createElement("div",{className:"App"},s.a.createElement(l.a,{store:C},s.a.createElement(m.a,null,s.a.createElement(i.d,null,s.a.createElement(i.b,{path:"/auth",component:h}),s.a.createElement(i.b,{path:"/chat",component:O})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[22,1,2]]]);
//# sourceMappingURL=main.07a9f347.chunk.js.map